# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=halcyon-ide
pkgver=27.d12bb7f
pkgrel=1
groups=('blackarch' 'blackarch-misc')
arch=('any')
pkgdesc='First IDE for Nmap Script (NSE) Development.'
url='https://halcyon-ide.org/'
license=('MIT')
depends=('java-environment' 'bash')
source=('git+https://github.com/s4n7h0/Halcyon.git')
noextract=("Halcyon_IDE_v$pkgver.jar")
sha512sums=('SKIP')

pkgver() {
  cd $pkgname

  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

package() {
  install -Dm 755 "$pkgdir/usr/bin"
  install -Dm 644 Halcyon_IDE_v$pkgver.jar "$pkgdir/usr/share/$pkgname/$pkgname.jar"

  cat > "$pkgdir/usr/bin/$pkgname" << EOF
#!/bin/sh
exec java -jar /usr/share/$pkgname/$pkgname.jar "\$@"
EOF

  chmod +x "$pkgdir/usr/bin/$pkgname"
}

