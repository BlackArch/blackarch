pkgname=htexploit
pkgver=0.77
pkgrel=3
groups=('blackarch' 'blackarch-exploitation')
pkgdesc="A Python script that exploits a weakness in the way that .htaccess files can be configured to protect a web directory with an authentication process"
url="http://www.mkit.com.ar/labs/htexploit/"
license=('GPLv3')
arch=(any)
depends=('python2')
source=("http://www.mkit.com.ar/labs/htexploit/source/htexploit-$pkgver.tar.gz")
md5sums=('de52f1237ab01f4fdedf1d2f752a3eda')

prepare(){
  cd "$srcdir/htexploit-$pkgver"
  sed -i 's|res/FullList|/usr/share/htexploit/res/FullList|' htexploit
}

package() {
  cd "$srcdir/htexploit-$pkgver"

  # Base directories.
  install -dm755 "$pkgdir/usr/bin"
  install -dm755 "$pkgdir/usr/share/htexploit"

  cp -a * "$pkgdir/usr/share/htexploit"

  cat > "$pkgdir/usr/bin/htexploit" <<EOF
#!/bin/sh
python2 /usr/share/htexploit/htexploit "\$@"
EOF
  chmod +x "$pkgdir/usr/bin/htexploit"
}

