# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=driftnet
_pkgname=driftnet-upstream
pkgver=1.2.0
pkgrel=1
groups=('blackarch' 'blackarch-scanner' 'blackarch-sniffer')
pkgdesc='Listens to network traffic and picks out images from TCP streams it observes.'
arch=('x86_64' 'armv6h' 'armv7h' 'aarch64')
url='http://www.ex-parrot.com/~chris/driftnet/'
license=('GPL')
depends=('libjpeg' 'libpcap' 'gtk2' 'giflib')
makedepends=('imake')
source=("https://github.com/deiv/driftnet/archive/upstream/$pkgname-$pkgver.tar.gz"
'gif.patch')
sha512sums=('c2af3d2ab0291bf6634295bd3f077a344195b44ae062aaf6586122223b87f60d81ff6240e1fb8a0b6c179e056dfa43e0e6500c4a9330370367279f0643075d28'
            '8162706c80b63296888b8bfebf2357793191a568d151a535f799b0e97ce577b4d7d90da11e6a0446928fb95a9710d55704f39898c84641bfbddadb839c49dfe4')

prepare() {
  cd "$_pkgname"

  cd src/display
}

build() {
  cd "$_pkgname"

  autoreconf -fi

  ./configure --prefix=/usr

  make
}

package() {
  cd "$_pkgname"

  make DESTDIR="$pkgdir" install
}

