# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=taipan
pkgver=2.9
pkgrel=1
pkgdesc='Web application security scanner.'
arch=('x86_64')
groups=('blackarch' 'blackarch-scanner' 'blackarch-webapp')
url='https://github.com/enkomio/Taipan'
license=('MIT')
depends=('mono')
makedepends=('unzip')
options=('!strip')
source=("$pkgname.zip::https://github.com/enkomio/Taipan/releases/download/2.9.489.12/TaipanScannerCommunity.v2.9.489.12.zip")
sha512sums=('8c107122827db097d2df2027e9a9a55ebe8217005a135126d7383631ba388f3085ea5302da535a0ce402b271b39bbc4a066566e27d8a39cf164b422d7cd7f2db')

package() {
  install -dm 755 "$pkgdir/usr/bin"
  install -dm 755 "$pkgdir/opt/$pkgname"

  rm "$pkgname.zip"

  cp -a --no-preserve=owner * "$pkgdir/opt/$pkgname/"

  cat > "$pkgdir/usr/bin/$pkgname" << EOF
#!/bin/sh
cd /opt/$pkgname
exec mono Taipan.exe "\$@"
EOF

   chmod +x "$pkgdir/usr/bin/$pkgname"
}

