# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=nzyme
pkgver=1.2.2
pkgrel=1
pkgdesc='WiFi defense system.'
arch=('any')
groups=('blackarch' 'blackarch-wireless' 'blackarch-defensive')
url='https://www.nzyme.org/download'
license=('custom:SSPL')
depends=('java-environment')
source=("https://assets.nzyme.org/releases/$pkgname-$pkgver.jar"
        "https://raw.githubusercontent.com/lennartkoopmann/$pkgname/master/$pkgname.conf.example"
        "https://raw.githubusercontent.com/lennartkoopmann/$pkgname/master/$pkgname-tracker.conf.example")
noextract=("$pkgname-$pkgver.jar")
sha512sums=('cd96ec2a5140b69417a03bac4264059764289d150a096f9b03d809b6b0d3acdc3f9689bb4f3fcc953f925eb0ad7d561f7738a2cd2e344e3d5b3420757a746a30'
            '5c12ecdb93cd10d33acf78e2702668e99e9f4a54b881290a2e5ad705ac6dda79f850604c3517e2a3f2224026f8f19106f57deef9c38af530cc280bed2d693ce3'
            'c40a0eaf620b0b9dd7ea84ae4e9b3fbb3a0021d4a34f8946aaedfdd96539f19340f350a92a8f4e34248f83297412a1b07a59ada4e0daddd0a70f26e5eccc8764')

package() {
  install -dm 755 "$pkgdir/usr/bin"

  install -Dm 644 "$pkgname-$pkgver.jar" \
    "$pkgdir/usr/share/$pkgname/$pkgname-$pkgver.jar"

  install -m 644 -t "$pkgdir/usr/share/$pkgname/" *.example

  cat > "$pkgdir/usr/bin/$pkgname" << EOF
#!/bin/sh
exec java -jar /usr/share/$pkgname/$pkgname-$pkgver.jar "\$@"
EOF

  chmod +x "$pkgdir/usr/bin/$pkgname"
}

