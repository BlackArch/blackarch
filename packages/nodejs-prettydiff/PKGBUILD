_npmname=prettydiff
pkgname=nodejs-$_npmname
pkgver=2.1.15
pkgrel=1
pkgdesc="Beautifier and language aware code comparison tool for many languages. It also minifies and a few other things."
arch=('any')
url="http://prettydiff.com"
license=('custom')
depends=('nodejs' 'npm')
source=("https://github.com/prettydiff/prettydiff/archive/$pkgver.zip")
options=(!strip)
sha256sums=('53b7be28326406b5607111b6aad89c535dacdc46d5aaab4ec391ab64bb9fcc96')

package() {
  cd "$srcdir/$_npmname-$pkgver"

  mkdir -p $pkgdir/usr/bin
  mkdir -p $pkgdir/usr/share/prettydiff

  cp -ar * $pkgdir/usr/share/prettydiff

  cat > "$pkgdir/usr/bin/prettydiff" << EOF
#!/bin/sh
cd /usr/share/prettydiff/
exec ./bin/prettydiff "\${@}"
EOF

  chmod +x "$pkgdir/usr/bin/prettydiff"
  chmod +x "$pkgdir/usr/share/prettydiff/bin/prettydiff"
}

