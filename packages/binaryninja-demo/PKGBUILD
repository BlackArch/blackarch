# This file is part of BlackArch Linux ( http://blackarch.org ).
# See COPYING for license details.

pkgname='binaryninja-demo'
pkgver='1.0.20'
pkgrel=1
pkgdesc='A new kind of reversing platform (demo version).'
groups=('blackarch' 'blackarch-reversing' 'blackarch-binary')
arch=('x86_64')
url='http://binary.ninja/demo.html'
license=('commercial' 'evaluation')
source=('https://cdn.binary.ninja/installers/BinaryNinja-demo.zip'
        'LICENSE')
sha1sums=('a2217ab06cabaad9d7cf538c1a08ebf8beae9f2d'
          '40523205c9b45c720a147be950f40c1e0afe0153')
install='binaryninja-demo.install'

package() {
  cd "$srcdir/binaryninja"

  mkdir -p "$pkgdir/usr/bin"
  mkdir -p "$pkgdir/usr/share/binaryninja-demo"

  install -Dm644 $srcdir/LICENSE \
    "$pkgdir/usr/share/licenses/binaryninja-demo/LICENSE"

  cp -a * "$pkgdir/usr/share/binaryninja-demo"

  cat > "$pkgdir/usr/bin/binaryninja-demo" << EOF
#!/bin/sh
cd /usr/share/binaryninja-demo
exec ./binaryninja "\${@}"
EOF

  chmod a+x "$pkgdir/usr/bin/binaryninja-demo"
}
