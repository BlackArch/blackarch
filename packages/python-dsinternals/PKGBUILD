# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=python-dsinternals
_pkgname=pydsinternals
pkgver=1.2.5
_pyver=3.14
pkgrel=1
pkgdesc='A Python native library containing necessary classes, functions and structures to interact with Windows Active Directory.'
arch=('any')
url='https://pypi.org/project/dsinternals/#files'
license=('MIT')
makedepends=('python-build' 'python-installer' 'python-setuptools'
             'python-wheel')
options=(!emptydirs)
source=("https://github.com/p0dalirius/pydsinternals/archive/refs/tags/$pkgver.tar.gz")
sha512sums=('7619404dfd31f6329c9105eeb55aecefadade191668cd3c0de14bba26ff59336725b0d48943109ac83878d8dc1b06d752af7c9fe479a8b8f13f14800eec03aba')

build() {
  cd "$_pkgname-$pkgver"

  python -m build --wheel --no-isolation
}

package() {
  cd "$_pkgname-$pkgver"

  python -m installer --destdir="$pkgdir" dist/*.whl

  rm -rf "$pkgdir/usr/lib/python$_pyver/site-packages/tests"
}

