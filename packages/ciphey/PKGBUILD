# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=ciphey
pkgver=5.14.0
pkgrel=1
pkgdesc='Automatically decrypt encryptions without knowing the key or cipher, decode encodings, and crack hashes.'
arch=('any')
groups=('blackarch' 'blackarch-cracker' 'blackarch-crypto')
url='https://github.com/Ciphey/Ciphey'
license=('MIT')
depends=('flake8' 'python' 'python-appdirs' 'python-base58' 'python-base91' 'python-cipheycore' 'python-cipheydists' 'python-click' 'python-pylint' 'python-loguru' 'python-mock' 'python-pyyaml' 'python-pybase62' 'python-pywhat' 'python-rich' 'python-typing_inspect' 'python-xortool-ciphey')
makedepends=('python-poetry-core')
options=(!emptydirs)
source=("https://files.pythonhosted.org/packages/source/${pkgname::1}/$pkgname/$pkgname-$pkgver.tar.gz")
sha512sums=('3dee0b9812beab2ff2ceddf06e58531fd8bda36c8cc5f6615b4e9368ad86baccc95fe5dfb76e5cfb330265957107fb9b63fb09c43a43fb146567461a4a7cf490')

build() {
  cd "$pkgname-$pkgver"

  python -m build --wheel --outdir="$startdir/dist"
}

package() {
  cd "$pkgname-$pkgver"

  pip install \
    --verbose \
    --disable-pip-version-check \
    --no-warn-script-location \
    --ignore-installed \
    --no-compile \
    --no-deps \
    --root="$pkgdir" \
    --prefix=/usr \
    --no-index \
    --find-links="file://$startdir/dist" \
    "$pkgname"
}
