# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=oat
pkgver=1.3.1
pkgrel=3
pkgdesc='A toolkit that could be used to audit security within Oracle database servers.'
arch=('any')
groups=('blackarch' 'blackarch-fuzzer')
url='http://www.cqure.net/wp/test/'
license=('GPL-2.0-or-later')
depends=('java-environment')
source=("https://web.archive.org/web/20111013041147if_/http://www.cqure.net/tools/$pkgname-source-$pkgver.zip"
        'oat-path.patch')
sha512sums=('018c388989f023c83fc1a6cbbcffe31322a0ffe621455e2fc4a9609507576f2d013aff3981a49e12b3ee63b9e213ec9dfe0d7df97087a345ca0a7e0a4aa78a29'
            '2e33d53057b264ebbad70e019f18090550e49a98b86b265eb5aef55b1e400a81b804730146d2cf2b03f2c0d91728004611925bce7e9e0c2032a67529301481ff')

prepare() {
  cd $pkgname

  patch -Np1 < ../oat-path.patch
}

package() {
  cd $pkgname

  install -dm 755 "$pkgdir/usr/share/$pkgname"

  cp -r tftproot "$pkgdir/usr/share/$pkgname/"
  cp ork.jar accounts.default "$pkgdir/usr/share/$pkgname/"

  for f in *.sh ; do
    install -Dm 755 "$f" "$pkgdir/usr/share/$pkgname/$f"
  done

  install -Dm 644 -t "$pkgdir/usr/share/$pkgname/" README
}

