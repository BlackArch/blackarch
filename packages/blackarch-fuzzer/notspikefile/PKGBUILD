# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=notspikefile
pkgver=0.1
pkgrel=5
epoch=1
pkgdesc="A Linux based file format fuzzing tool"
arch=('x86_64' 'aarch64')
url='http://packetstormsecurity.com/files/39627/notSPIKEfile.tgz.html'
license=('GPL')
groups=('blackarch' 'blackarch-fuzzer')
source=('http://dl.packetstormsecurity.net/fuzzer/notSPIKEfile.tgz'
        'x64-support_and_static-linking.patch');
sha512sums=('3d8c02961ef47dfbe058158dd772b55dedb841cbf2413280622f36fbd44afb34a1f60117bf598d00c005c48642c81798d696eda18e76f412c2c763fa8d199d38'
            'e3cc48137bd1e9960494fca11e30cfb171191480505a4c6c22debad04cec3cc239e499658605a14bc1d96c4da0641c451b6442e94749c0a60ab0385054e80a1d')

prepare() {
  cd dist

  patch -p1 < "$srcdir/x64-support_and_static-linking.patch"
}

build() {
  cd dist

  make -C libdisasm/src/arch/i386/libdisasm/

  make
}

package() {
  cd dist

  install -Dm 755 notSPIKEfile "$pkgdir/usr/bin/$pkgname"
}

