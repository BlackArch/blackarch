post_install() {
  set -e
  cd /usr/share/ghauri
  python -m venv venv
  source venv/bin/activate &&
    pip install --isolated --root="/usr/share/ghauri" --prefix='venv' \
      -r requirements.txt
    pip install -e .
    # if from pypi
    # pip install --isolated --root="/usr/share/ghauri" --prefix='venv' \
    #   ghauri
    # if there is a pyproject.toml we don't need requirements.txt,
    # then pip can read it automatically
    # pip install --isolated --root="/usr/share/ghauri" --prefix='venv' .
}

post_upgrade() {
  post_install "$@"
}

post_remove() {
  # /usr/share/ghauri/venv
  rm -r /usr/share/ghauri
}
