# Maintainer: Ari Mizrahi <codemunchies@gmail.com>

pkgname=john
pkgver=1.7.9
pkgrel=1
pkgdesc="john the ripper is a fast password/hash cracker to detect weak credentials"
arch=('i686' 'x86_64')
url="http://www.openwall.com/john/"
license=('GPL')
source=(
	"http://www.blackarch.org/pkgs/$pkgname-$pkgver.tar.gz"
	"http://www.blackarch.org/dsktp/blackarch-$pkgname.desktop"
)
md5sums=('
	2b448547109db3777d8068145ea69ddf
	e9f63569637a0a02c77881ffd05a7427
')

build() {
  cd "$srcdir/$pkgname-$pkgver/src"
  if [ "$(uname -m)" = "x86_64" ]; then
    make clean linux-x86-64
  else
    make clean linux-x86-sse2
  fi
}

package() {
  cd "$srcdir"
  install -Dm644 blackarch-${pkgname}.desktop ${pkgdir}/usr/share/applications/blackarch-${pkgname}.desktop

  cd "$srcdir/$pkgname-$pkgver"
  install -dm755 ${pkgdir}/blackarch/vulnerability_analysis/john
  cp --preserve=mode -r * ${pkgdir}/blackarch/vulnerability_analysis/john
}
