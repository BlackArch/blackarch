# Maintainer: Ari Mizrahi <codemunchies@gmail.com>

pkgname=reaver-wps
pkgver=1.4
pkgrel=1
pkgdesc="implements a brute force attack against wifi protected setup WPS registrar PINs in order to recover WPA/WPA2 passphrases"
arch=('i686' 'x86_64')
url="http://code.google.com/p/reaver-wps"
license=('GPL')
source=(
	"http://www.blackarch.org/pkgs/$pkgname-$pkgver.tar.gz"
	"http://www.blackarch.org/dsktp/blackarch-$pkgname.desktop"
)
md5sums=('
	9bb057a8691a30ee06b5ed90a58140e1
	76c213b91c9861b8cb0d997a4275cad4
')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  ./configure
  make
}

package() {
  cd "$srcdir"
  install -Dm644 blackarch-${pkgname}.desktop ${pkgdir}/usr/share/applications/blackarch-${pkgname}.desktop

  cd "$srcdir/$pkgname-$pkgver"
  install -dm755 "$pkgdir/blackarch/exploitation/reaver-wps/bin/"
  install -m755 reaver "$pkgdir/blackarch/exploitation/reaver-wps/bin/"
  install -m755 wash "$pkgdir/blackarch/exploitation/reaver-wps/bin/"
  install -dm755 "$pkgdir/blackarch/exploitation/reaver-wps/etc/"
  install -m644 reaver.db "$pkgdir/blackarch/exploitation/reaver-wps/etc/"
}
